<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pathshala - The Digital Library</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">

    <!-- GSAP (GreenSock Animation Platform) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- Three.js for 3D Animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        /* Basic styling for the custom scrollbar and body */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #e2e8f0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Styling for the animated feature text background */
        .feature-text {
            background-image: linear-gradient(90deg, #38bdf8, #a78bfa, #38bdf8);
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: text-flow 5s linear infinite;
        }

        @keyframes text-flow {
            to {
                background-position: 200% center;
            }
        }
        
        /* Styles for Current Affairs content */
        .current-affairs-content h3 {
            font-size: 1.25rem; /* 20px */
            font-weight: 700;
            color: #38bdf8;
            margin-top: 1.5rem; /* 24px */
            margin-bottom: 0.75rem; /* 12px */
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #334155;
        }
        .current-affairs-content ul {
            list-style-type: none;
            padding-left: 0;
        }
        .current-affairs-content li {
            padding-left: 1.75rem; /* 28px */
            position: relative;
            margin-bottom: 1.25rem; /* 20px */
        }
        .current-affairs-content li::before {
            content: '⚡️';
            position: absolute;
            left: 0;
            top: 2px;
            color: #f59e0b;
        }
        .current-affairs-content strong {
            color: #e2e8f0;
            font-weight: 600;
        }
        .current-affairs-content p {
            color: #94a3b8;
            margin-top: 0.25rem;
        }


        /* Styles for the generated plan */
        #planResult h3 {
            font-size: 1.25rem;
            font-weight: bold;
            color: #38bdf8;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        #planResult ul {
            list-style-position: inside;
            padding-left: 0.5rem;
            margin-bottom: 1.5rem;
        }
        #planResult li {
            margin-bottom: 0.5rem;
            color: #cbd5e1;
        }
         #planResult p {
            margin-bottom: 1rem;
            color: #e2e8f0;
        }
        
        /* Styles for collapsed current affairs */
        #current-affairs-output {
            max-height: 28rem;
            overflow: hidden;
            position: relative;
            transition: max-height 0.7s ease-in-out;
        }
        #current-affairs-output::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 10rem;
            background: linear-gradient(to top, rgb(17 24 39 / 0.9), transparent);
            pointer-events: none;
            transition: opacity 0.5s ease-in-out;
        }
        #current-affairs-output.expanded {
            max-height: 10000px; /* Large value to simulate no limit */
        }
        #current-affairs-output.expanded::after {
            opacity: 0;
        }
        
        #three-canvas-container {
            position: absolute;
            top: 0;
            left: 2;
            width: 90%;
            height: 75%;
        }

    </style>
</head>
<body class="overflow-x-hidden">

    <!-- Header Section -->
    <header class="fixed top-0 left-0 w-full z-50 p-4 md:p-6 transition-all duration-300" id="navbar">
        <div class="container mx-auto flex justify-between items-center">
            <a href="#" class="flex items-center gap-3">
                <img src="pathshala logo.png" alt="Pathshala Logo" class="h-10 w-10 rounded-full">
                <h1 class="text-2xl font-bold tracking-wider text-white">PATHSHALA</h1>
            </a>
            <nav>
                <a href="#contact" class="px-4 py-2 text-white bg-sky-500/80 hover:bg-sky-500 rounded-lg transition-colors shadow-lg shadow-sky-500/20">Join Now</a>
            </nav>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="h-screen flex flex-col p-4 relative" id="hero">
            
             <!-- Background elements -->
            <div class="absolute inset-0 z-0">
                <canvas id="particle-canvas" class="absolute inset-0 opacity-0"></canvas>
            </div>
            
            <!-- Structural Wrapper -->
            <div class="flex flex-col h-full w-full">
                <!-- Top half for 3D animation -->
                <div id="three-canvas-container" class="relative w-full flex-1 pointer-events-none z-10"></div>
                
                <!-- Bottom half for text content -->
                <div id="hero-text-container" class="relative z-20 flex flex-col justify-end items-center text-center flex-1 pb-32">
                    <div class="opacity-0" id="hero-text-content">
                        <h2 class="text-4xl md:text-7xl font-black uppercase tracking-tighter text-white" id="hero-title-1">Your Sanctuary</h2>
                        <h2 class="text-4xl md:text-7xl font-black uppercase tracking-tighter feature-text" id="hero-title-2">for Focus.</h2>
                        <h3 class="text-mg md:text-1xl font-semibold mt-4 bg-gradient-to-r from-pink-300 to-cyan-300 bg-clip-text text-transparent" id="hero-tagline">
                            Pathshala - The Self Study Digital Library
                          </h3>                       
                        <p class="mt-4 max-w-xl text-slate-300 text-base md:text-lg" id="hero-subtitle">A modern, silent space designed for deep work and undisturbed study.</p>
                    </div>
                </div>
            </div>

            <div class="absolute bottom-10 z-20 text-white opacity-0 w-full flex flex-col items-center" id="scroll-indicator">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 animate-bounce" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
                <span class="mt-2 block">Scroll to explore</span>
            </div>
        </section>

        <!-- Daily Current Affairs Section -->
        <section id="daily-current-affairs" class="py-20 px-4 bg-black border-y-2 border-slate-800">
            <div class="container mx-auto max-w-4xl">
                <div class="text-center mb-12">
                    <h2 class="text-4xl md:text-6xl font-black feature-text mb-2">Daily Current Affairs</h2>
                    <p class="text-slate-400 text-lg">Powered by Pathshala AI</p>
                    <p id="current-affairs-date" class="mt-4 text-sky-400 font-semibold"></p>
                </div>

                <div class="bg-slate-900/50 p-4 sm:p-6 rounded-2xl border border-slate-800 shadow-2xl shadow-sky-900/20">
                    <div class="flex flex-wrap justify-center items-center gap-2 mb-6 border-b border-slate-700 pb-4">
                        <span class="text-slate-300 font-medium mr-2">Select Language:</span>
                        <button class="lang-btn active" data-lang="English">English</button>
                        <button class="lang-btn" data-lang="हिन्दी">हिन्दी</button>
                        <button class="lang-btn" data-lang="Hinglish">Hinglish</button>
                        <button class="lang-btn" data-lang="अपनी वाली">अपनी वाली</button>
                    </div>

                    <div id="current-affairs-container" class="current-affairs-content">
                        <!-- Shimmer loading effect -->
                        <div id="loading-shimmer">
                            <div class="space-y-8">
                                <div class="h-6 bg-slate-700 rounded w-1/3 animate-pulse"></div>
                                <div class="space-y-4">
                                    <div class="h-4 bg-slate-700 rounded w-full animate-pulse"></div>
                                    <div class="h-4 bg-slate-700 rounded w-5/6 animate-pulse"></div>
                                </div>
                                <div class="space-y-4">
                                    <div class="h-4 bg-slate-700 rounded w-full animate-pulse"></div>
                                    <div class="h-4 bg-slate-700 rounded w-4/6 animate-pulse"></div>
                                </div>
                                 <div class="h-6 bg-slate-700 rounded w-1/3 animate-pulse"></div>
                                 <div class="space-y-4">
                                    <div class="h-4 bg-slate-700 rounded w-full animate-pulse"></div>
                                    <div class="h-4 bg-slate-700 rounded w-5/6 animate-pulse"></div>
                                </div>
                            </div>
                        </div>
                        <div id="current-affairs-output" class=""></div>
                    </div>
                     <div class="text-center mt-6">
                        <button id="view-all-btn" class="px-6 py-2 bg-sky-600/50 hover:bg-sky-600/80 text-white rounded-lg transition-all duration-300 hidden">View All</button>
                    </div>
                </div>
            </div>
             <style>
                .lang-btn {
                    padding: 0.5rem 1rem;
                    border: 1px solid #334155;
                    color: #94a3b8;
                    background-color: transparent;
                    border-radius: 0.5rem;
                    transition: all 0.2s ease-in-out;
                    font-weight: 500;
                }
                .lang-btn:hover {
                    background-color: #1e293b;
                    color: #e2e8f0;
                }
                .lang-btn.active {
                    background-color: #0ea5e9;
                    border-color: #0ea5e9;
                    color: white;
                    font-weight: 700;
                }
            </style>
        </section>


        <!-- Features Section Wrapper -->
        <div id="features-wrapper" class="relative min-h-screen bg-[#0a0a0a]">
            <!-- Feature 1: High-Speed WiFi -->
            <section id="feature-wifi" class="h-screen flex items-center justify-center p-4 absolute inset-0 z-10">
                <div class="text-center max-w-2xl">
                    <div class="feature-icon-wifi text-6xl md:text-8xl text-sky-400 mb-8 mx-auto">
                        <!-- SVG Icon for WiFi -->
                        <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mx-auto"><path d="M12 5.5C12 5.5 12 5.5 12 5.5C12 5.5 12 5.5 12 5.5Z" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/><path opacity="0" class="wifi-wave-3" d="M3.3418 9.50195C5.93838 6.60293 9.42371 5 12.0001 5C14.5764 5 18.0617 6.60293 20.6583 9.50195" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/><path opacity="0" class="wifi-wave-2" d="M5.89844 12.8027C7.68962 10.7816 10.1983 9.80078 12.0001 9.80078C13.8018 9.80078 16.3105 10.7816 18.1017 12.8027" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/><path opacity="0" class="wifi-wave-1" d="M8.44141 16.1016C9.5218 14.9213 10.9632 14.2998 12.0001 14.2998C13.0369 14.2998 14.4783 14.9213 15.5587 16.1016" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/></svg>
                    </div>
                    <h3 class="text-3xl md:text-5xl font-bold feature-text">Uninterrupted High-Speed WiFi</h3>
                    <p class="mt-4 text-slate-400 text-lg">Stream, research, and download without limits. Our fiber-optic connection ensures your work is never interrupted.</p>
                </div>
            </section>

            <!-- Feature 2: Air Conditioning -->
            <section id="feature-ac" class="h-screen flex items-center justify-center p-4 absolute inset-0 z-20">
                <div class="text-center max-w-2xl">
                    <div class="feature-icon-ac text-6xl md:text-8xl text-sky-400 mb-8 mx-auto relative w-24 h-24">
                        <!-- SVG Icon for AC -->
                        <svg class="absolute inset-0 ac-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                        <svg class="absolute inset-0 ac-flake opacity-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line></svg>
                    </div>
                    <h3 class="text-3xl md:text-5xl font-bold feature-text">Perfectly Air Conditioned</h3>
                    <p class="mt-4 text-slate-400 text-lg">Stay cool and comfortable, no matter the season. Our climate-controlled environment is optimized for concentration.</p>
                </div>
            </section>

            <!-- Feature 3: Personal Space -->
            <section id="feature-space" class="h-screen flex items-center justify-center p-4 absolute inset-0 z-30">
                <div class="w-full max-w-2xl text-center">
                    <div class="feature-icon-space w-full h-48 mb-8 relative">
                        <!-- Grid background for the space animation -->
                        <div class="grid grid-cols-5 gap-2 w-full h-full">
                           <div class="space-box bg-slate-800 rounded-lg"></div>
                           <div class="space-box bg-slate-800 rounded-lg"></div>
                           <div class="space-box bg-slate-800 rounded-lg"></div>
                           <div class="space-box bg-slate-800 rounded-lg"></div>
                           <div class="space-box bg-slate-800 rounded-lg"></div>
                           <div class="space-box bg-slate-800 rounded-lg"></div>
                           <div id="focused-space" class="bg-sky-500 rounded-lg shadow-2xl shadow-sky-500/50 flex items-center justify-center">
                               <span class="text-white font-bold text-sm md:text-lg opacity-0" id="focused-text">Your Zone</span>
                           </div>
                           <div class="space-box bg-slate-800 rounded-lg"></div>
                           <div class="space-box bg-slate-800 rounded-lg"></div>
                           <div class="space-box bg-slate-800 rounded-lg"></div>
                        </div>
                    </div>
                    <div id="space-text-container">
                        <h3 class="text-3xl md:text-5xl font-bold feature-text">Your Own Personal Space</h3>
                        <p class="mt-4 text-slate-400 text-lg">Each seat is a private hub with ample room, power access, and a clean, minimalist design to eliminate distractions.</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- Contact & Location Section -->
        <section id="contact" class="py-20 px-4 bg-black">
             <div class="container mx-auto text-center">
                <h2 class="text-4xl md:text-6xl font-black feature-text mb-4">Ready to Find Your Focus?</h2>
                <p class="text-slate-400 text-lg max-w-2xl mx-auto mb-12">Visit us to experience the perfect study environment. Book a seat today.</p>

                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <!-- Location Info -->
                    <div class="text-left bg-slate-900/50 p-8 rounded-2xl border border-slate-800">
                        <h3 class="text-2xl font-bold text-white mb-6">Our Location</h3>
                        <div class="space-y-4 text-slate-300">
                            <p class="flex items-start">
                                <svg class="w-6 h-6 mr-3 text-sky-400 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                <span>Pathshala - The Self Study Digital Library<br>WQH8+52J Sagrasundarpur, Uttar Pradesh</span>
                            </p>
                            <div>
                                <p class="flex items-center">
                                  <svg class="w-6 h-6 mr-3 text-sky-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                                  <a href="tel:+919936881108" class="mr-4 hover:underline">+91 9936881108</a>
                                  <a href="tel:+918318859565" class="hover:underline">+91 8318859565</a>
                                </p>
                              
                                <p class="flex items-center mt-2">
                                  <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mr-3 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 16 16">
                                      <path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/>
                                  </svg>
                                  <a href="https://wa.me/919696015053" target="_blank" rel="noopener noreferrer" class="underline">+91 9696015053</a>
                                </p>
                              </div>
                            <p class="flex items-center">
                                <svg class="w-6 h-6 mr-3 text-sky-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                                <a href="mailto:info.pathshalalibrary@gmail.com">info.pathshalalibrary@gmail.com</a>
                            </p>
                        </div>
                    </div>
                    <!-- Google Maps Embed -->
                    <div>
                         <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3588.221146832611!2d81.7650156!3d25.9279625!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x399aee984a0b4d43%3A0xe13142efdd328b0e!2sWQH8%2B52J%2C%20Sagrasundarpur%2C%20Uttar%20Pradesh%20230136!5e0!3m2!1sen!2sin!4v1759083243807!5m2!1sen!2sin" 
                            width="100%" 
                            height="350" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade"
                            class="rounded-2xl border border-slate-800">
                        </iframe>
                    </div>
                </div>
            </div>
        </section>

    </main>
    
    <footer class="bg-slate-900/50 py-6 px-4">
        <div class="container mx-auto text-center text-slate-400">
            <p>© 2025<br>Pathshala - The Self Study Digital Library.<br>All Rights Reserved.<br>Designed for focus.</p>
            <p style="font-size: 20px;">Proprieter: Vaibhav Tripathi</p>
            <p>Developed By: Utkarsh Tripathi<br><a href="https://wa.me/919696015053" target="_blank" rel="noopener noreferrer" class="hover:underline">W/A : +91 8960860302</a></p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    
        // --- 3D Hero Animation Setup ---
        const container = document.getElementById('three-canvas-container');
        const particleCanvas = document.getElementById('particle-canvas');
        let scene, camera, renderer, studyStation, laptopTop;
    
         // --- Particle Canvas Animation ---
        const ctx = particleCanvas.getContext('2d');
        particleCanvas.width = window.innerWidth;
        particleCanvas.height = window.innerHeight;
        let particlesArray;
    
        class Particle {
            constructor(x, y, directionX, directionY, size, color) {
                this.x = x; this.y = y; this.directionX = directionX; this.directionY = directionY; this.size = size; this.color = color;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                ctx.fillStyle = 'rgba(56, 189, 248, 0.3)';
                ctx.fill();
            }
            update() {
                if (this.x > particleCanvas.width || this.x < 0) { this.directionX = -this.directionX; }
                if (this.y > particleCanvas.height || this.y < 0) { this.directionY = -this.directionY; }
                this.x += this.directionX;
                this.y += this.directionY;
                this.draw();
            }
        }
    
        function initParticles() {
            particlesArray = [];
            let numberOfParticles = (particleCanvas.height * particleCanvas.width) / 9000;
            for (let i = 0; i < numberOfParticles; i++) {
                let size = (Math.random() * 2) + 1;
                let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2);
                let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2);
                let directionX = (Math.random() * .4) - .2;
                let directionY = (Math.random() * .4) - .2;
                particlesArray.push(new Particle(x, y, directionX, directionY, size, 'rgba(56, 189, 248, 0.3)'));
            }
        }
    
        function animateParticles() {
            requestAnimationFrame(animateParticles);
            ctx.clearRect(0,0,innerWidth, innerHeight);
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
            }
        }
    
        // Helper function for rounded box geometry
        function createRoundedBoxGeometry(width, height, depth, radius, smoothness) {
            let shape = new THREE.Shape();
            let x = -width / 2;
            let y = -height / 2;
            shape.moveTo(x, y + radius);
            shape.lineTo(x, y + height - radius);
            shape.quadraticCurveTo(x, y + height, x + radius, y + height);
            shape.lineTo(x + width - radius, y + height);
            shape.quadraticCurveTo(x + width, y + height, x + width, y + height - radius);
            shape.lineTo(x + width, y + radius);
            shape.quadraticCurveTo(x + width, y, x + width - radius, y);
            shape.lineTo(x + radius, y);
            shape.quadraticCurveTo(x, y, x, y + radius);
    
            const extrudeSettings = {
                depth: depth - (radius * 2),
                bevelEnabled: true,
                bevelSegments: smoothness,
                steps: 1,
                bevelSize: radius,
                bevelThickness: radius,
                curveSegments: smoothness
            };
            const geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);
            geometry.center();
            return geometry;
        }
    
        function createLaptopScreenTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 256;
            const context = canvas.getContext('2d');
            context.fillStyle = '#0a0a0a';
            context.fillRect(0, 0, 512, 256);
            context.fillStyle = '#f1f5f9';
            context.font = 'bold 80px Inter, sans-serif';
            context.textAlign = 'center';
            context.textBaseline = 'middle';
            context.fillText('Pathshala', 256, 100); 
            context.fillText('AI', 259, 179); 
            const texture = new THREE.CanvasTexture(canvas);
            texture.anisotropy = 16;
            return texture;
        }
    
    
        function initThree() {
            scene = new THREE.Scene();
            
            const fov = 75;
            const aspect = container.clientWidth / container.clientHeight;
            const near = 0.1;
            const far = 1000;
            camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
            camera.position.z = 18;
            camera.position.y = 8;
            
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            container.appendChild(renderer.domElement);
    
            // --- Lighting ---
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.3);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.4);
            directionalLight.position.set(-15, 25, 20);
            directionalLight.castShadow = true;
            directionalLight.shadow.mapSize.width = 2048;
            directionalLight.shadow.mapSize.height = 2048;
            scene.add(directionalLight);
    
            const spotLight = new THREE.SpotLight(0xffeeb1, 2, 30, Math.PI / 4, 1, 2);
            spotLight.castShadow = true;
    
            // Add a soft rim light for background separation
            const rimLight = new THREE.PointLight(0x8ab4f8, 0.75, 100); // Soft blue light
            rimLight.position.set(0, 5, -15); // Position behind the scene
            scene.add(rimLight);
            
            // --- Materials ---
            const whiteCeramic = new THREE.MeshStandardMaterial({ color: 0xf8fafc, roughness: 0.1, metalness: 0.1 });
            const shiningSteel = new THREE.MeshStandardMaterial({ color: 0x9ca3af, metalness: 1.0, roughness: 0.2 });
            const brownLeather = new THREE.MeshStandardMaterial({ color: 0x6d4c41, roughness: 0.4 });
            const laptopScreenMaterial = new THREE.MeshBasicMaterial({ map: createLaptopScreenTexture() });
            const laptopBody = new THREE.MeshStandardMaterial({ color: 0x475569, metalness: 0.8, roughness: 0.3 });
            const bookPagesMaterial = new THREE.MeshStandardMaterial({ color: 0xf1f5f9 });
            const greyMetal = new THREE.MeshStandardMaterial({ color: 0x4A5568, metalness: 0.8, roughness: 0.2 });
    
            // --- Models ---
            studyStation = new THREE.Group();
            studyStation.scale.set(0.7, 0.7, 0.7);
            camera.lookAt(studyStation.position);
    
            // 1. Premium Table
            const tableTop = new THREE.Mesh(createRoundedBoxGeometry(14, 0.4, 7, 0.2, 8), whiteCeramic);
            tableTop.receiveShadow = true;
            const leg = new THREE.Mesh(new THREE.CylinderGeometry(0.25, 0.25, 6, 32), shiningSteel);
            const leg1 = leg.clone(); leg1.position.set(-6, -3.2, -2.5); leg1.castShadow=true;
            const leg2 = leg.clone(); leg2.position.set(6, -3.2, -2.5); leg2.castShadow=true;
            const leg3 = leg.clone(); leg3.position.set(-6, -3.2, 2.5); leg3.castShadow=true;
            const leg4 = leg.clone(); leg4.position.set(6, -3.2, 2.5); leg4.castShadow=true;
            const desk = new THREE.Group();
            desk.add(tableTop, leg1, leg2, leg3, leg4);
    
            // 2. Comfy Chair
            const chairPost = new THREE.Mesh(new THREE.CylinderGeometry(0.2, 0.2, 1.5, 32), shiningSteel);
            chairPost.position.y = -4.25;
            const wheelBase = new THREE.Group();
            for (let i = 0; i < 5; i++) {
                const angle = (i / 5) * Math.PI * 2;
                const arm = new THREE.Mesh(createRoundedBoxGeometry(2, 0.15, 0.15, 0.05, 4), shiningSteel);
                arm.position.set(Math.sin(angle) * 1, -5.2, Math.cos(angle) * 1);
                arm.lookAt(chairPost.position);
                const wheel = new THREE.Mesh(new THREE.CylinderGeometry(0.3, 0.3, 0.2, 16), shiningSteel);
                wheel.rotation.z = Math.PI / 2;
                wheel.position.set(Math.sin(angle) * 2, -5.2, Math.cos(angle) * 2);
                wheelBase.add(arm, wheel);
            }
            const chairSeat = new THREE.Mesh(createRoundedBoxGeometry(4, 0.8, 4, 0.4, 8), brownLeather);
            chairSeat.position.y = -3;
            const chairBack = new THREE.Mesh(createRoundedBoxGeometry(4, 5, 0.8, 0.4, 8), brownLeather);
            chairBack.position.set(0, -0.5, -1.75);
            chairBack.rotation.x = 0.1;
            const chair = new THREE.Group();
            chair.add(chairPost, wheelBase, chairSeat, chairBack);
            chair.position.set(0, 0, 8); 
            chair.castShadow = true;
    
            // 3. Laptop (Restored)
            const laptopBase = new THREE.Mesh(createRoundedBoxGeometry(3, 0.2, 2, 0.1, 4), laptopBody);
            laptopTop = new THREE.Mesh(createRoundedBoxGeometry(3, 2, 0.2, 0.1, 4), laptopBody);
            const screen = new THREE.Mesh(new THREE.PlaneGeometry(2.8, 1.8), laptopScreenMaterial);
            laptopTop.add(screen);
            screen.position.z = 0.11;
            laptopTop.position.set(0, 1, -1);
            laptopTop.rotation.x = Math.PI / 2; // Closed
            laptopBase.add(laptopTop);
            const laptop = new THREE.Group();
            laptop.add(laptopBase);
            laptop.position.set(-3.5, 0.4, 0.5);
            laptop.castShadow = true;
            
            // 4. Books
            function createBook(color, height) {
                const cover = new THREE.Mesh(createRoundedBoxGeometry(1.8, height, 2.5, 0.05, 4), new THREE.MeshStandardMaterial({ color }));
                const pages = new THREE.Mesh(new THREE.BoxGeometry(1.7, height - 0.05, 2.4), bookPagesMaterial);
                cover.add(pages);
                pages.position.x = 0.05;
                return cover;
            }
            const book1 = createBook(0x4A90E2, 0.4);
            const book2 = createBook(0xD0021B, 0.3);
            book2.position.y = 0.42;
            book2.rotation.y = 0.15;
            const books = new THREE.Group();
            books.add(book1, book2);
            books.position.set(4, 0.4, 0);
            books.castShadow = true;
            books.visible = false;
    
            // 5. Hanging Lamp (Restored)
            const lampCable = new THREE.Mesh(new THREE.CylinderGeometry(0.05, 0.05, 20, 32), greyMetal);
            lampCable.position.y = 13.5;
            const lampShade = new THREE.Mesh(new THREE.CylinderGeometry(0.5, 1.5, 1.5, 32), greyMetal);
            lampShade.position.y = 3;
            const lamp = new THREE.Group();
            lamp.add(lampCable, lampShade, spotLight, spotLight.target);
            spotLight.position.set(0, 2.5, 0);
            spotLight.target.position.set(0, 0, 0);
            lamp.position.y = 20;
    
            studyStation.add(desk, chair, laptop, books, lamp);
            scene.add(studyStation);
    
            window.threeObjects = { desk, chair, laptop, books, lamp, spotLight, laptopTop, studyStation };
        }
        
        function animateThree() {
            requestAnimationFrame(animateThree);
            renderer.render(scene, camera);
        }
        
        function onWindowResize() {
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
            
            particleCanvas.width = innerWidth;
            particleCanvas.height = innerHeight;
            initParticles();
        }
        
        window.addEventListener('resize', onWindowResize, false);
        
        initThree();
        animateThree();
        initParticles();
        animateParticles();
    
        // --- GSAP Animations ---
        gsap.registerPlugin(ScrollTrigger);
    
        gsap.to("#navbar", { 
            scrollTrigger: { trigger: "#hero", start: "1px top", end: "+=100", scrub: true, }, 
            backgroundColor: "rgba(10, 10, 10, 0.8)", backdropFilter: "blur(10px)", borderBottom: "1px solid rgba(255, 255, 255, 0.1)" 
        });
    
        // --- Hero Section Intro Animation ---
        const masterTl = gsap.timeline({delay: 0.2});
        const { desk, chair, laptop, books, lamp, spotLight, laptopTop: lt, studyStation: ss } = window.threeObjects;
        
        gsap.set(["#hero-text-content", "#scroll-indicator", "#particle-canvas"], { opacity: 0 });
        
        // Set initial off-screen positions and opacities
        gsap.set(desk.position, { y: -50, opacity: 0 });
        gsap.set(chair.position, { x: -50, z: 10, opacity: 0 });
        gsap.set(chair.rotation, { y: Math.PI });
        gsap.set(laptop.position, { x: 50, opacity: 0 });
        gsap.set(books.position, { z: -50, opacity: 0 });
        gsap.set(lamp.position, { y: 30, opacity: 0 });
        gsap.set(lamp.rotation, { z: Math.PI / 3 });
    
        // 1. Assembly Animation
        masterTl.to([desk, chair, laptop, books, lamp].map(o => o.position), { opacity: 1, duration: 0.1 })
          .to(lamp.position, { y: 3.5, duration: 2, ease: 'expo.out' }, "<")
          .to(lamp.rotation, { z: 0, duration: 2.5, ease: 'elastic.out(1, 0.3)' }, "<")
          .to(spotLight, { intensity: 1.5, duration: 1, ease: 'power2.inOut' }, "<0.5")
          .to(desk.position, { y: 0, duration: 2, ease: 'expo.out' }, "<0.2")
          .to(chair.position, { x: -1, z: 7, duration: 2, ease: 'expo.out' }, "<0.2")
          .to(chair.rotation, { y: Math.PI * 3 - Math.PI / 4, duration: 2.2, ease: 'expo.out' }, "<0.2")
          .set(books, { visible: true }, "<0.5")
          .to(books.position, { z: 0, duration: 1.5, ease: 'expo.out' }, "<")
          .to(laptop.position, { x: -3.5, duration: 1.5, ease: 'expo.out' }, "<")
          .to(ss.rotation, { y: -Math.PI / 8, x: Math.PI / 16, duration: 3, ease: 'power3.inOut' }, "<0.5")
          .to(lt.rotation, { x: -0.2, duration: 1.2, ease: 'elastic.out(1, 0.5)' }, ">-0.5");
    
        // 2. Text & Background Animation
        masterTl.to("#particle-canvas", { opacity: 1, duration: 1.5}, "-=2.5")
          .to("#hero-text-content", { opacity: 1, duration: 1.5 }, "-=2.0")
          .from(["#hero-title-1", "#hero-title-2", "#hero-subtitle"], { y: 30, stagger: 0.2, ease: 'expo.out' }, "<")
          .to("#scroll-indicator", { opacity: 1, duration: 1 }, ">-0.5");
        
        
        // Features Wrapper Pinning and Section Transitions
        let tl = gsap.timeline({ scrollTrigger: { trigger: "#features-wrapper", start: "top top", end: "+=3500vh", pin: true, scrub: 1, } });
        gsap.set("#feature-ac", { autoAlpha: 0 }); gsap.set("#feature-space", { autoAlpha: 0 });
        tl.to("#feature-wifi", { autoAlpha: 0, duration: 0.7 }, 3.0)      
          .to("#feature-ac", { autoAlpha: 1, duration: 0.7 }, 4.0)       
          .to("#feature-ac", { autoAlpha: 0, duration: 0.8 }, 7.0) 
          .to("#feature-space", { autoAlpha: 1, duration: 0.7 }, 7.7);   
        gsap.set([".wifi-wave-1", ".wifi-wave-2", ".wifi-wave-3"], { opacity: 0 });
        tl.to(".wifi-wave-1", { opacity: 1, duration: 0.3 }, 0.5).to(".wifi-wave-2", { opacity: 1, duration: 0.3 }, 1.0).to(".wifi-wave-3", { opacity: 1, duration: 0.3 }, 1.5);     
        gsap.set(".ac-flake", { rotation: -360, opacity: 0, scale: 0.5 });
        tl.to(".ac-sun", { rotation: 360, opacity: 0, scale: 0.5, duration: 0.5 }, 5.75) 
          .to(".ac-flake", { rotation: 0, opacity: 1, scale: 1, duration: 0.5 }, 6.25); 
        gsap.set("#focused-text", { opacity: 0 });
        const feature3StartTime = 8.5; 
        tl.to(".space-box", { scale: 0.5, opacity: 0.3, stagger: 0.05, duration: 1.0 }, feature3StartTime) 
          .to("#space-text-container", { opacity: 0, y: -20, duration: 0.8 }, feature3StartTime)          
          .to("#focused-space", { scale: 3, transformOrigin: "center center", duration: 1.5 }, feature3StartTime) 
          .to("#focused-text", { opacity: 1, duration: 0.8 }, feature3StartTime + 0.7);                            
               
        
        // --- Daily Current Affairs Logic ---
        const shimmerEl = document.getElementById('loading-shimmer');
        const outputEl = document.getElementById('current-affairs-output');
        const langButtons = document.querySelectorAll('.lang-btn');
        const viewAllBtn = document.getElementById('view-all-btn');
        const dateEl = document.getElementById('current-affairs-date');
    
        const today = new Date();
        const dateString = today.toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' });
        dateEl.textContent = `For ${dateString}`;
    
        // A new, simpler function to fetch content from our own backend
        async function displayCurrentAffairs(lang) {
            outputEl.classList.add('hidden');
            shimmerEl.classList.remove('hidden');
            viewAllBtn.classList.add('hidden');
    
            try {
                // This calls the /functions/get-news.js file we created
                const response = await fetch(`/get-news?lang=${lang}`);
                if (!response.ok) {
                    throw new Error(`Failed to fetch content. Server responded with ${response.status}`);
                }
                const contentHtml = await response.text();
    
                outputEl.innerHTML = contentHtml;
    
            } catch (error) {
                console.error('Failed to display current affairs:', error);
                outputEl.innerHTML = `<p class="text-red-400">Sorry, we couldn't load the current affairs right now. Please try again later.</p>`;
            } finally {
                shimmerEl.classList.add('hidden');
                outputEl.classList.remove('hidden');
                viewAllBtn.classList.remove('hidden');
                // Reset view state
                outputEl.classList.remove('expanded');
                viewAllBtn.textContent = 'View All';
                 setTimeout(() => {
                    ScrollTrigger.refresh();
                }, 100);
            }
        }
    
        // Add event listeners to the language buttons
        langButtons.forEach(button => {
            button.addEventListener('click', () => {
                if (button.classList.contains('active')) return;
                
                langButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                const targetLang = button.dataset.lang;
                displayCurrentAffairs(targetLang);
            });
        });
    
        // "View All" button logic
        viewAllBtn.addEventListener('click', () => {
            const isExpanded = outputEl.classList.contains('expanded');
            outputEl.classList.toggle('expanded');
            viewAllBtn.textContent = isExpanded ? 'View All' : 'Show Less';
            // Refresh ScrollTrigger to account for the new page height
            setTimeout(() => {
                ScrollTrigger.refresh();
            }, 700); // A small delay to allow the CSS transition to complete
        });
    
        // Initial fetch on page load (for English)
        displayCurrentAffairs('English');
    
        });
    </script>

</body>
</html>

